f(z) := (tan(z))/z^i; //a complex function
coalorize(z) := (
  n = 12; //highlight 12 different phases
  z = log(z)/(2*pi)+i*seconds()/25+seconds()/25;
  zfract = n*z - floor(n*z); //n*z in C mod Z[i]
  factor = (.6+.4*re(sqrt(im(zfract)*re(zfract))));
  hue(im(z))*factor; //darken hue with factor
);
colorplot( colorize(f(complex(#))) );